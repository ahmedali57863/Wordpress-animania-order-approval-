const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableChart-1.0.35-BKkzJ1i9.js","./cm-1.0.35--NMEhA6K.js","./redux-1.0.35-xa1uZ5t4.js","./vendor-1.0.35-CN03Eozo.js","./index-1.0.35-DVsXCdtu.js","./index-1.0.35-Bmw9p4nW.js","./cjs-1.0.35-B75n3jry.js","./Typography-1.0.35-DmbWmVEH.js","./lib-1.0.35-vCbYWOI3.js","./loglevel-1.0.35-BZ7XahX3.js","./lodash-1.0.35-CNe2eGU5.js","./moment-1.0.35-C5S46NFB.js","./iconBase-1.0.35-CEh1aNes.js","./useEnhancedEffect-1.0.35-gtlBTowv.js","./notistack-1.0.35-C7EWtXAA.js","./RestApi-1.0.35-Bt-tzntO.js","./ChartTypeSelection-1.0.35-BtPsoSnH.js","./ChartTypes-1.0.35-3axO9rHn.js","./index-1.0.35-DHBDMhlb.js","./FormHelperText-1.0.35-BubqYRHL.js","./useFormControl-1.0.35-gKEqvAy-.js","./TextField-1.0.35-B1uB0pL3.js","./Menu-1.0.35-3APgaaPr.js","./AdminTheme-1.0.35-BtyHaBRh.js","./FormLabel-1.0.35-DqGGwQsT.js","./useControlled-1.0.35-Cu7qahuZ.js","./createSvgIcon-1.0.35-C47rBL-a.js","./MenuItem-1.0.35-DJ1Zxsyh.js","./ListItemIcon-1.0.35-Cltcdraz.js","./Chart-1.0.35-BfkC_RH6.js","./main-1.0.35.js","./useTheme-1.0.35-DvysJ9Pk.js","./index-1.0.35-CCys4hnd.js","./Spinner-1.0.35-Dd1TcgqP.js","./Tooltip-1.0.35-DvHLxZ2q.js","./Popper-1.0.35-BZjTWtMm.js","./TableChartSelection-1.0.35-CLIWqP-8.js","./useTableColumnOrder-1.0.35-I4yr5RT5.js","./index.esm-1.0.35-BcBy0Voo.js","./TableContainer-1.0.35-BaHCfHCa.js","./tanstack-1.0.35-wJk0lVz7.js","./FallbackSpinner-1.0.35-CzYFJIrC.js","./ActionsSettings-1.0.35-B25TLnTF.js","./TargetEnum-1.0.35-DPFnTxiX.js","./ConfirmDialog-1.0.35-5-r3Xts8.js","./DialogContent-1.0.35-B5TpMgZC.js","./ConfirmDialog-1.0.35--D4jr2go.css","./ScopeEnum-1.0.35-B4DDvIDj.js","./index-1.0.35-BtMPEpn4.js","./TabPanel-1.0.35-CQEcgw4y.js","./useTableUpdater-1.0.35-Du0YkN1k.js","./settings-1.0.35-CRkkJAih.js","./settings-1.0.35-Bx2jvYL6.css","./Autocomplete-1.0.35-DKAFaob_.js","./Close-1.0.35-D-owgKS4.js","./TableToolbarInlineEditingButton-1.0.35-Dsk3zsIL.js","./TableQuery-1.0.35-ah_QGnBJ.js","./useStoreTable-1.0.35-BoSxKhPI.js","./index-1.0.35-BRrsEYVz.js","./ActionsDml-1.0.35-BvngWXxi.js","./SanitizeComponent-1.0.35-FQ6XuGa5.js","./dompurify-1.0.35-DhD2mIk-.js","./index.esm-1.0.35-D3Hcqm12.js","./Stack-1.0.35-CNlFgJdo.js","./Radio-1.0.35-Hf47vRci.js","./SwitchBase-1.0.35-BN1QoK5P.js","./Checkbox-1.0.35-DB1d6Tfc.js","./Collapse-1.0.35-EVtTATBO.js","./AlertTitle-1.0.35-t_Cdy-a_.js","./InputAdornment-1.0.35-CVHCdOjF.js","./Divider-1.0.35-CstwCFXQ.js","./FormControlLabel-1.0.35-DFi_cuDq.js","./Switch-1.0.35-Z50HBuFJ.js","./Slider-1.0.35-W2wgb_UG.js","./visuallyHidden-1.0.35-Dan1xhjv.js","./TimePicker-1.0.35-hlUlrDh1.js","./useMobilePicker-1.0.35-DbPqlT_f.js","./ListItem-1.0.35-wFs78pI9.js","./timeViewRenderers-1.0.35-CeX9NbnQ.js","./DateTimePicker-1.0.35-CyWECMiL.js","./Tabs-1.0.35-D_fzHWOP.js","./dateViewRenderers-1.0.35-C_1fWZJ-.js","./DatePicker-1.0.35-B-kEzyTM.js","./useScreenSize-1.0.35-D9QB3bUJ.js","./ThemeContainer-1.0.35-BrWpdfpd.js","./ThemeContainer-1.0.35-DR7D6eET.css","./index-1.0.35-ChYeyr_I.js","./AggregationLabelsEnum-1.0.35-B-3lhjpJ.js","./TableQuery-1.0.35-uJ6MlsKy.css"])))=>i.map(i=>d[i]);
import{_ as ge}from"./main-1.0.35.js";import{j as l}from"./cm-1.0.35--NMEhA6K.js";import{r as u}from"./redux-1.0.35-xa1uZ5t4.js";import{l as m,v as Me,Q as de,a9 as qe,aY as He,bm as Ve,bB as Ue,bN as Je}from"./lib-1.0.35-vCbYWOI3.js";import{F as Ke,M as ze,B as K,m as Ge,P as Xe,K as Qe}from"./cjs-1.0.35-B75n3jry.js";import{P as Ye,b as ue,a as Ze}from"./index-1.0.35-DVsXCdtu.js";import{n as pe,o as Le,p as $e}from"./index-1.0.35-BtMPEpn4.js";import{r as We}from"./jstoxml-1.0.35-DkGlThlH.js";import{F as $}from"./FileSaver.min-1.0.35-Cpl1m5n7.js";import"./dompurify-1.0.35-DhD2mIk-.js";import{u as De,a as er,b as rr}from"./TableQuery-1.0.35-ah_QGnBJ.js";import{d as tr}from"./ActionsDml-1.0.35-BvngWXxi.js";import{b as or}from"./ConfirmDialog-1.0.35-5-r3Xts8.js";import{e as J}from"./notistack-1.0.35-C7EWtXAA.js";import{a as sr}from"./RestApi-1.0.35-Bt-tzntO.js";import{u as nr,A as lr}from"./useTheme-1.0.35-DvysJ9Pk.js";import{u as ae}from"./index-1.0.35-CCys4hnd.js";import{B as T}from"./Spinner-1.0.35-Dd1TcgqP.js";import{I as V}from"./iconBase-1.0.35-CEh1aNes.js";import{F as ye}from"./FormHelperText-1.0.35-BubqYRHL.js";import{A as ir,C as cr}from"./Autocomplete-1.0.35-DKAFaob_.js";import{T as dr}from"./TextField-1.0.35-B1uB0pL3.js";import{T as G}from"./Tooltip-1.0.35-DvHLxZ2q.js";import{P as ur}from"./Menu-1.0.35-3APgaaPr.js";import{F as me}from"./FormLabel-1.0.35-DqGGwQsT.js";import{F as B}from"./FormControlLabel-1.0.35-DFi_cuDq.js";import{C as pr}from"./Checkbox-1.0.35-DB1d6Tfc.js";import{R as ar}from"./RadioGroup-1.0.35-en0YSLOf.js";import{R as N}from"./Radio-1.0.35-Hf47vRci.js";import{R as fe}from"./ThemeContainer-1.0.35-BrWpdfpd.js";import"./moment-1.0.35-C5S46NFB.js";import{F as xe}from"./FallbackSpinner-1.0.35-CzYFJIrC.js";import"./vendor-1.0.35-CN03Eozo.js";import"./loglevel-1.0.35-BZ7XahX3.js";import"./lodash-1.0.35-CNe2eGU5.js";import"./Typography-1.0.35-DmbWmVEH.js";import"./useEnhancedEffect-1.0.35-gtlBTowv.js";import"./index-1.0.35-Bmw9p4nW.js";import"./useStoreTable-1.0.35-BoSxKhPI.js";import"./index-1.0.35-BRrsEYVz.js";import"./SanitizeComponent-1.0.35-FQ6XuGa5.js";import"./index-1.0.35-DHBDMhlb.js";import"./tanstack-1.0.35-wJk0lVz7.js";import"./index.esm-1.0.35-D3Hcqm12.js";import"./createSvgIcon-1.0.35-C47rBL-a.js";import"./Stack-1.0.35-CNlFgJdo.js";import"./DialogContent-1.0.35-B5TpMgZC.js";import"./Collapse-1.0.35-EVtTATBO.js";import"./AlertTitle-1.0.35-t_Cdy-a_.js";import"./Close-1.0.35-D-owgKS4.js";import"./InputAdornment-1.0.35-CVHCdOjF.js";import"./useFormControl-1.0.35-gKEqvAy-.js";import"./MenuItem-1.0.35-DJ1Zxsyh.js";import"./AdminTheme-1.0.35-BtyHaBRh.js";import"./useControlled-1.0.35-Cu7qahuZ.js";import"./ListItemIcon-1.0.35-Cltcdraz.js";import"./Divider-1.0.35-CstwCFXQ.js";import"./Switch-1.0.35-Z50HBuFJ.js";import"./SwitchBase-1.0.35-BN1QoK5P.js";import"./Slider-1.0.35-W2wgb_UG.js";import"./visuallyHidden-1.0.35-Dan1xhjv.js";import"./TimePicker-1.0.35-hlUlrDh1.js";import"./useMobilePicker-1.0.35-DbPqlT_f.js";import"./Popper-1.0.35-BZjTWtMm.js";import"./ListItem-1.0.35-wFs78pI9.js";import"./timeViewRenderers-1.0.35-CeX9NbnQ.js";import"./DateTimePicker-1.0.35-CyWECMiL.js";import"./Tabs-1.0.35-D_fzHWOP.js";import"./dateViewRenderers-1.0.35-C_1fWZJ-.js";import"./DatePicker-1.0.35-B-kEzyTM.js";import"./index.esm-1.0.35-BcBy0Voo.js";import"./TableContainer-1.0.35-BaHCfHCa.js";import"./ActionsSettings-1.0.35-B25TLnTF.js";import"./TargetEnum-1.0.35-DPFnTxiX.js";import"./ScopeEnum-1.0.35-B4DDvIDj.js";import"./TabPanel-1.0.35-CQEcgw4y.js";import"./useTableUpdater-1.0.35-Du0YkN1k.js";import"./settings-1.0.35-CRkkJAih.js";import"./useScreenSize-1.0.35-D9QB3bUJ.js";import"./index-1.0.35-ChYeyr_I.js";import"./AggregationLabelsEnum-1.0.35-B-3lhjpJ.js";import"./useTableColumnOrder-1.0.35-I4yr5RT5.js";var W;(function(e){e.csv="text/csv",e.tsv="text/tab-separated-values",e.plain="text/plain"})(W||(W={}));var I=e=>e,g=e=>e,H=I,X=I,_=I,he=I,be=I,mr={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,fileExtension:"csv",mediaType:W.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},fr=`\r
`,xr="\uFEFF",Q=e=>Object.assign({},mr,e);class hr extends Error{constructor(t){super(t),this.name="CsvGenerationError"}}class br extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}}class gr extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}}class yr extends Error{constructor(t){super(t),this.name="UnsupportedDataFormatError"}}var jr=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},wr=e=>he(typeof e=="object"?e.key:e),vr=e=>be(typeof e=="object"?e.displayLabel:e),Sr=(e,...t)=>t.reduce((s,c)=>c(s),e),Cr=e=>t=>e.useBom?X(g(t)+xr):t,Tr=e=>t=>e.showTitle?D(X(g(t)+e.title))(_("")):t,D=e=>t=>X(g(e)+g(t)+fr),je=e=>(t,s)=>kr(e)(_(g(t)+g(s))),kr=e=>t=>I(g(t)+e.fieldSeparator),Rr=(e,t)=>s=>{if(!e.showColumnHeaders)return s;if(t.length<1)throw new br("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let c=_("");for(let p=0;p<t.length;p++){const i=vr(t[p]);c=je(e)(c,we(e,g(i)))}return c=_(g(c).slice(0,-1)),D(s)(c)},Or=(e,t,s)=>c=>{let p=c;for(var i=0;i<s.length;i++){let a=_("");for(let y=0;y<t.length;y++){const w=wr(t[y]),h=s[i][g(w)];a=je(e)(a,we(e,h))}a=_(g(a).slice(0,-1)),p=D(p)(a)}return p},Br=e=>+e===e&&(!isFinite(e)||!!(e%1)),Er=(e,t)=>{if(Br(t)){if(e.decimalSeparator==="locale")return H(t.toLocaleString());if(e.decimalSeparator)return H(t.toString().replace(".",e.decimalSeparator))}return H(t.toString())},z=(e,t)=>{let s=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(s=e.quoteCharacter+jr(t,e.quoteCharacter)+e.quoteCharacter),H(s)},Fr=(e,t)=>{const s=t?"true":"false";return H(e.boolDisplay[s])},Ar=(e,t)=>typeof t>"u"&&e.replaceUndefinedWith!==void 0?z(e,e.replaceUndefinedWith+""):t===null?z(e,"null"):z(e,""),we=(e,t)=>{if(typeof t=="number")return Er(e,t);if(typeof t=="string")return z(e,t);if(typeof t=="boolean"&&e.boolDisplay)return Fr(e,t);if(t===null||typeof t>"u")return Ar(e,t);throw new yr(`
    typeof ${typeof t} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},Pr=e=>t=>{const s=Q(e),c=s.useKeysAsHeaders?Object.keys(t[0]):s.columnHeaders;let p=Sr(X(""),Cr(s),Tr(s),Rr(s,c),Or(s,c,t));if(g(p).length<1)throw new hr("Output is empty. Is your data formatted correctly?");return p},Nr=e=>t=>{const s=Q(e),c=g(t),p=s.useTextFile?"text/plain":s.mediaType;return new Blob([c],{type:`${p};charset=utf8;`})},_r=e=>t=>{if(!window)throw new gr("Downloading only supported in a browser environment.");const s=Nr(e)(t),c=Q(e),p=c.useTextFile?"txt":c.fileExtension,i=`${c.filename}.${p}`,a=document.createElement("a");a.download=i,a.href=URL.createObjectURL(s),a.setAttribute("visibility","hidden"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},Ir=We();const Mr=({openSelection:e,setOpenSelection:t,appLanguage:s,columnLabels:c,availableColumns:p,selectedColumns:i,setSelectedColumns:a})=>{const y=ae("(max-width:900px)"),w=ae("(max-width:600px)");return l.jsx(Ke,{open:e,onClose:()=>{t(!1)},children:l.jsxs(T,{sx:{position:"absolute",top:"25%",left:"50%",transform:"translate(-50%, -50%)",width:w?"80vw":y?"70vw":"60vw",maxWidth:"700px",bgcolor:"background.paper",boxShadow:24,borderRadius:"4px",p:4},children:[l.jsxs(T,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-20px"},children:[l.jsx("h3",{children:s.selectFromList}),l.jsx(V,{onClick:()=>{t(!1)},children:l.jsx(ze,{})})]}),l.jsx(ye,{fullWidth:!0,children:l.jsx(ir,{multiple:!0,options:p,value:i,disableCloseOnSelect:!0,getOptionLabel:h=>c[h],onChange:(h,k)=>{a(k),h.stopPropagation()},renderInput:h=>l.jsx(dr,{...h}),renderTags:(h,k)=>h.map((v,j)=>{const{key:R,...E}=k({index:j});return l.jsx(cr,{variant:"outlined",label:c[v],...E},R)})})})]})})},qr=({table:e,appId:t,metaData:s,bulkActions:c,tableStore:p,appLanguage:i,locale:a,refetch:y,componentWidth:w,aggregates:h})=>{m.debug(t,s,c);const k=sr(),v=p.table,j=p.columns;nr(t),De(t);const[R]=u.useState(p.table.clientSideProcessing),E=n=>{var r,o,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((o=s==null?void 0:s.columns[d])==null?void 0:o.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.data_type;return"varchar"},Y=n=>{var r,o,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((o=s==null?void 0:s.columns[d])==null?void 0:o.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.column_type;return null},ee=()=>M.map(n=>{const r={};for(let o=0;o<b.length;o++)r[P[b[o]]]=n[P[b[o]]];return r}),U=()=>{var n,r,o;return(n=s==null?void 0:s.src)!=null&&n.app_id?"ppBulkAction-"+s.src.app_id+"-"+s.src.cnt_id:(r=s==null?void 0:s.src)!=null&&r.dbs&&((o=s==null?void 0:s.src)!=null&&o.tbl)?"ppBulkAction-"+s.src.dbs+"-"+s.src.tbl:null},[Ur,Jr]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdforientation");if(n!==null)return n}catch(n){m.debug(n)}return"landscape"}),[Kr,zr]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdfstyle");if(n!==null)return n}catch(n){m.debug(n)}return"striped"}),[Gr,Xr]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-poweredBy");if(n!==null)return n==="true"}catch(n){m.debug(n)}return!0});let re="csv";c.select!==void 0&&(re="select");const[f,ve]=u.useState(re),[Se,te]=u.useState(!1),Ce=u.useMemo(()=>Me(),[]),S=er(t),F=u.useMemo(()=>{const n={};return j.filter(r=>r.lookup!==void 0&&S!==void 0&&S[r.columnName]!==void 0).map(r=>{var o;if(S!==void 0&&S[r.columnName]!==void 0){const x=[];for(const d in S[r.columnName]){const L={key:d,value:Array.isArray(S[r.columnName][d])?S[r.columnName][d].join((o=r.lookup)==null?void 0:o.delimiter):S[r.columnName][d]};x.push(L)}n[r.columnName]=x}}),n},[S,j]);m.debug("lookupColumns",F);const A=u.useMemo(()=>{const n={};return j.filter(r=>r.computedField!==void 0).map(r=>{n[r.columnName]=r.computedField}),n},[j]);m.debug(A);const P=u.useMemo(()=>{const n={};return j.map(r=>{A[r.columnName]?n[r.columnName]=A[r.columnName].label:n[r.columnName]=r.columnLabel}),n},[A,j]);m.debug(P);const Te=(n,r)=>{if(F!==void 0&&F[n]!==void 0){const o=F[n].filter(x=>x.key===r);if(Array.isArray(o)&&o.length===1)return o[0].value}return r},Z=e.getAllColumns(),C=e.getSelectedRowModel().rows,O=u.useMemo(()=>Z.filter(n=>n.id!=="mrt-row-actions"&&n.id!=="mrt-row-select"&&n.id!=="mrt-row-expand").map(n=>n.id),[]);m.debug(O);const oe=u.useMemo(()=>O.map(n=>{const r=Y(n);if(r===null)return 20;if(r.indexOf("(")!==-1){let o=r.substring(r.indexOf("(")+1);return o.indexOf(")")!==-1&&(o=o.substring(0,o.indexOf(")"))),o.indexOf(".")!==-1&&(o=o.substring(0,o.indexOf("."))),o.indexOf(",")!==-1&&(o=o.substring(0,o.indexOf(","))),Number(o)}return null}),[O]);m.debug(oe);const[se,Qr]=u.useState(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n+"-wrapped-columns");if(r!==null)return JSON.parse(r)}catch(r){m.debug(r)}return O.filter((r,o)=>(oe[o]??99)<=20)});m.debug(se);const ne=u.useMemo(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n);if(r!==null)return JSON.parse(r)}catch(r){m.debug(r)}return O},[O]);m.debug(ne);const[b,ke]=u.useState(ne);m.debug(b);const M=C.map(n=>{const r={};return Z.map(o=>{o.id!=="mrt-row-actions"&&o.id!=="mrt-row-select"&&o.id!=="mrt-row-expand"&&(F!==void 0&&F[o.id]!==void 0?r[P[o.id]]=Te(o.id,n.getValue(o.id)):A[o.id]||(r[P[o.id]]=n.getValue(o.id)))}),r});m.debug(M);const le=C.map(n=>{const r={};return Z.map(o=>{o.id!=="mrt-row-actions"&&o.id!=="mrt-row-select"&&o.id!=="mrt-row-expand"&&A[o.id]===void 0&&(r[o.id]=n.getValue(o.id))}),r});m.debug(le);const q=()=>{var n,r;return(s==null?void 0:s.src)===void 0?t:s.src.app_id&&((r=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:r.app_title)!==""?s.app.app[0].app_title:s.src.dbs?s.src.tbl:t},ie=Q({filename:q(),fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),[Re,Yr]=u.useState(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n+"-pdf-title");if(r!==null)return r}catch(r){m.debug(r)}return q()});m.debug("pdfTitle",Re);const Oe=async()=>{},Be=()=>{const n=Pr(ie)(ee());_r(ie)(n)},Ee=()=>{$(new Blob([JSON.stringify(ee())],{type:"text/json;charset=utf-8"}),q()+".json")};u.useRef();const Fe=()=>{const n=C.map(o=>{const x={};for(let d=0;d<b.length;d++)o.original[b[d]]!==void 0&&(x[b[d]]=o.original[b[d]]??"");return{row:x}}),r=Ir.toXML({table:n});$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".xml")},Ae=()=>{const n=Ve(t);m.debug(n);let r="insert into "+n.tbl+" (";Object.keys(C[0].original).map(o=>{r+=o+","}),r=r.slice(0,-1)+") values ";for(let o=0;o<M.length;o++){const x=M[o];r+="(";for(const d in x){const L=Ue(E(d));x[d]===null?r+="null,":L==="number"?r+=x[d]+",":r+="'"+x[d]+"',"}r=r.slice(0,-1),r+="),"}r=r.slice(0,-1)+`;
`,$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".sql")},Pe=()=>{k(de({appId:t,property:{isRowCountUpdated:!0}}));for(let n=0;n<M.length;n++){const r=Je(s,le[n]);tr(t,r,o=>{if(o!=null&&o.code&&(o!=null&&o.message))switch(o.code){case"ok":J(i.deletedSuccessful,{variant:"success"}),y();break;default:m.error(o),J(o.message??i.invalidResponse,{variant:"error"})}else m.error(o),J(i.invalidResponse,{variant:"error"})},o=>{m.error("error",o),J(o??i.invalidResponse,{variant:"error"})})}e.setRowSelection({})},Ne=()=>null,_e=()=>null,[Zr,Lr]=u.useState(0),[$r,Wr]=u.useState(0),[Ie,ce]=u.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx(Ye,{variant:"popover",popupId:Ce,children:n=>{var r;return l.jsxs(l.Fragment,{children:[w<900?l.jsx(G,{title:i.bulkActions,children:l.jsx(V,{...ue(n),children:l.jsx(pe,{})})}):l.jsx(K,{variant:"contained",endIcon:l.jsx(pe,{}),...ue(n),children:i.bulkActions}),p.state.relTab===!0&&l.jsx(K,{variant:"contained",startIcon:l.jsx(Ge,{}),sx:{marginLeft:"10px"},onClick:()=>{k(de({appId:t,property:{isRelTabOpen:!1}}))},children:i.back}),l.jsx(ur,{...Ze(n),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:l.jsxs(T,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[R===!0?l.jsxs(T,{sx:{textAlign:"center",display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[C.length===0?l.jsx(me,{sx:{textAlign:"center"},children:i.noRowsSelected}):l.jsx("span",{}),l.jsx(ye,{children:l.jsx(B,{control:l.jsx(pr,{className:"pp-checkbox",checked:C.length>0,onChange:()=>{e.toggleAllRowsSelected()}}),label:l.jsx(T,{sx:{display:"flex",alignItems:"center"},children:i.selectAll})})})]}):l.jsx(l.Fragment,{children:C.length===0&&l.jsx(T,{sx:{textAlign:"center"},children:l.jsx(me,{children:i.noRowsSelected})})}),l.jsxs(ar,{value:f,onChange:(o,x)=>{ve(x),o.stopPropagation()},children:[Ne(),c.csv&&l.jsx(B,{value:"csv",label:i.exportToCsv,control:l.jsx(N,{})}),c.json&&l.jsx(B,{value:"json",label:i.exportToJson,control:l.jsx(N,{})}),_e(),c.xml&&l.jsx(B,{value:"xml",label:i.exportToXml,control:l.jsx(N,{})}),c.sql&&!qe(t)&&l.jsx(B,{value:"sql",label:i.exportToSql,control:l.jsx(N,{})}),((r=s==null?void 0:s.privs)==null?void 0:r.delete)&&!He(s)&&(c==null?void 0:c.delete)===!0&&v.transactions.delete&&l.jsx(B,{value:"delete",label:i.deletePermanently,control:l.jsx(N,{})}),(c.select??!1)&&l.jsx(B,{value:"select",label:i.addSelectedRow,control:l.jsx(N,{})})]}),l.jsxs(T,{sx:{display:"grid",gridTemplateColumns:f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"?"1fr auto":"1fr",gap:"10px"},children:[l.jsx(K,{variant:"contained",onClick:()=>{if(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"){const o=U();if(o!==null)try{localStorage.setItem(o,JSON.stringify(b)),localStorage.setItem(o+"-wrapped-columns",JSON.stringify(se))}catch(x){m.debug(x)}}switch(f){case"pdf":Oe();break;case"csv":Be();break;case"json":Ee();break;case"excel":break;case"xml":Fe();break;case"sql":Ae();break;case"delete":te(!0);break}},disabled:C.length===0||(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&(b==null?void 0:b.length)===0,children:i.apply}),(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&l.jsx(G,{title:a.showHideColumns,children:l.jsx(V,{onClick:()=>{ce(!0)},children:l.jsx(Xe,{})})})]})]})})]})}}),l.jsx(or,{title:i.deleteRowsTitle,message:i.deleteRowsMessage,open:Se,setOpen:te,onConfirm:()=>{Pe()},theme:lr}),l.jsx(Mr,{openSelection:Ie,setOpenSelection:ce,appLanguage:i,columnLabels:P,availableColumns:O,selectedColumns:b,setSelectedColumns:ke})]})},Hr=u.lazy(()=>ge(()=>import("./TableChart-1.0.35-BKkzJ1i9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54]),import.meta.url)),Vr=u.lazy(()=>ge(()=>import("./TableToolbarInlineEditingButton-1.0.35-Dsk3zsIL.js"),__vite__mapDeps([55,1,2,3,56,30,14,8,9,10,11,57,15,58,6,7,12,13,59,44,23,45,46,60,61,18,40,62,26,32,63,34,25,35,33,64,65,20,66,22,53,21,19,24,54,67,68,69,27,28,70,71,72,73,74,75,76,5,77,78,79,80,81,82,38,31,39,41,42,43,47,48,49,50,51,52,83,84,85,86,87,37,88]),import.meta.url)),Oo=({table:e,metaData:t,appId:s,bulkActions:c,hasBulkActions:p,tableStore:i,appLanguage:a,locale:y,refetch:w,showForm:h,appSettings:k,componentWidth:v,aggregates:j})=>{var E;const R=i.table;return rr(s),l.jsxs(T,{sx:{display:"flex",flexWrap:"nowrap",gap:v<600?"0":"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[l.jsx(G,{arrow:!0,title:a.refresh,className:"ppToolbarRefreshIcon",children:l.jsx(V,{onClick:()=>w(),children:l.jsx(Qe,{})})}),((E=R==null?void 0:R.transactions)==null?void 0:E.insert)&&l.jsx(l.Fragment,{children:v<900?l.jsx(G,{title:a.newRow,children:l.jsx(V,{onClick:()=>{h(null,fe.INSERT)},children:l.jsx(Le,{})})}):l.jsx(K,{variant:"contained",startIcon:l.jsx($e,{}),onClick:()=>{h(null,fe.INSERT)},children:a.newRow})}),p&&l.jsx(qr,{table:e,appId:s,metaData:t,bulkActions:c,tableStore:i,appLanguage:a,locale:y,refetch:w,componentWidth:v,aggregates:j}),i.table.charts.enabled===!0&&(i.table.charts.interactive===!0||!0)&&l.jsx(u.Suspense,{fallback:l.jsx(xe,{}),children:l.jsx(Hr,{appId:s,componentWidth:v,table:e,tableStore:i,metaData:t,appLanguage:a})}),i.table.inlineEditing.addColumnButton===!1&&i.columns.filter(Y=>Y.inlineEditing===!0).length>0&&l.jsx(u.Suspense,{fallback:l.jsx(xe,{}),children:l.jsx(Vr,{appId:s,metaData:t,locale:y,appLanguage:a,componentWidth:v,refetch:w})}),!1]})};export{Oo as default};
