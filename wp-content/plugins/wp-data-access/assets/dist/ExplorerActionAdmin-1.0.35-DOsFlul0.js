const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsActions-1.0.35-kWqyUble.js","./cm-1.0.35--NMEhA6K.js","./redux-1.0.35-xa1uZ5t4.js","./vendor-1.0.35-CN03Eozo.js","./RestApi-1.0.35-Bt-tzntO.js","./lib-1.0.35-vCbYWOI3.js","./loglevel-1.0.35-BZ7XahX3.js","./lodash-1.0.35-CNe2eGU5.js","./moment-1.0.35-C5S46NFB.js","./ActionsAdmin-1.0.35-Dnqdw7Du.js","./notistack-1.0.35-C7EWtXAA.js","./ConfirmDialog-1.0.35-5-r3Xts8.js","./Typography-1.0.35-DmbWmVEH.js","./iconBase-1.0.35-CEh1aNes.js","./useEnhancedEffect-1.0.35-gtlBTowv.js","./cjs-1.0.35-B75n3jry.js","./AdminTheme-1.0.35-BtyHaBRh.js","./DialogContent-1.0.35-B5TpMgZC.js","./ConfirmDialog-1.0.35--D4jr2go.css","./Spinner-1.0.35-Dd1TcgqP.js","./index-1.0.35-DHBDMhlb.js","./index-1.0.35-Duj-VvUw.js","./useExplorer-1.0.35-DvFNFLeO.js","./FormHelperText-1.0.35-BubqYRHL.js","./useFormControl-1.0.35-gKEqvAy-.js","./TextField-1.0.35-B1uB0pL3.js","./Menu-1.0.35-3APgaaPr.js","./FormLabel-1.0.35-DqGGwQsT.js","./useControlled-1.0.35-Cu7qahuZ.js","./createSvgIcon-1.0.35-C47rBL-a.js","./MenuItem-1.0.35-DJ1Zxsyh.js","./FormControlLabel-1.0.35-DFi_cuDq.js","./Switch-1.0.35-Z50HBuFJ.js","./SwitchBase-1.0.35-BN1QoK5P.js","./Tooltip-1.0.35-DvHLxZ2q.js","./Popper-1.0.35-BZjTWtMm.js","./SettingsTable-1.0.35-B6VbHSOI.js","./AccordionSummary-1.0.35-Do5lpUEE.js","./Collapse-1.0.35-EVtTATBO.js","./AccordionDetails-1.0.35-CUwNn0VM.js","./RadioGroup-1.0.35-en0YSLOf.js","./Radio-1.0.35-Hf47vRci.js","./main-1.0.35.js","./TabPanel-1.0.35-CQEcgw4y.js","./ActionsExplorer-1.0.35-frLqGKOk.js","./index-1.0.35-BtMPEpn4.js","./settings-1.0.35-CRkkJAih.js","./settings-1.0.35-Bx2jvYL6.css","./ActionsDml-1.0.35-BvngWXxi.js","./ExplorerActionEnum-1.0.35-eclZgKpy.js","./useUiExplorerAction-1.0.35-UC0bUFD1.js","./SettingsColumn-1.0.35-VVh35VI2.js","./SettingsRestApi-1.0.35-B5CwFJWZ.js","./index-1.0.35-ChYeyr_I.js","./Autocomplete-1.0.35-DKAFaob_.js","./Close-1.0.35-D-owgKS4.js","./main-1.0.35-DkGWeYUl.css","./SettingsReset-1.0.35-BXbAPe8C.js","./ActionsSettings-1.0.35-B25TLnTF.js","./TargetEnum-1.0.35-DPFnTxiX.js","./ScopeEnum-1.0.35-B4DDvIDj.js","./ResizableDrawer-1.0.35-Db0Upw2F.js","./useScreenSize-1.0.35-D9QB3bUJ.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.35--NMEhA6K.js";import{_ as m}from"./main-1.0.35.js";import{r as s}from"./redux-1.0.35-xa1uZ5t4.js";import{B as se,a as oe,T as ae,b as P}from"./TabPanel-1.0.35-CQEcgw4y.js";import{T as j,C as B,a as O,b as re}from"./ConfirmDialog-1.0.35-5-r3Xts8.js";import{A as ne,T as ie,M as le,B as _}from"./cjs-1.0.35-B75n3jry.js";import{u as ce,a as me}from"./RestApi-1.0.35-Bt-tzntO.js";import{l,bk as w,S as N,b as u,bl as ue,aP as pe,a7 as V,a6 as G,P as de,a as F,s as ge}from"./lib-1.0.35-vCbYWOI3.js";import{A as U}from"./AdminTheme-1.0.35-BtyHaBRh.js";import{B as b,S as f}from"./Spinner-1.0.35-Dd1TcgqP.js";import{s as xe}from"./ActionsExplorer-1.0.35-frLqGKOk.js";import{e as p}from"./notistack-1.0.35-C7EWtXAA.js";import{f as fe,i as Se}from"./index-1.0.35-BtMPEpn4.js";import{B as he}from"./settings-1.0.35-CRkkJAih.js";import{g as je}from"./ActionsDml-1.0.35-BvngWXxi.js";import{T as H}from"./Typography-1.0.35-DmbWmVEH.js";import{I as E}from"./iconBase-1.0.35-CEh1aNes.js";import{E as _e}from"./ExplorerActionEnum-1.0.35-eclZgKpy.js";import{u as be}from"./useUiExplorerAction-1.0.35-UC0bUFD1.js";const Ee=()=>{const t=ce(n=>n.manager.settings);return l.debug("managerSettings",t),t},Ae=s.lazy(()=>m(()=>import("./SettingsActions-1.0.35-kWqyUble.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]),import.meta.url)),Te=s.lazy(()=>m(()=>import("./SettingsTable-1.0.35-B6VbHSOI.js"),__vite__mapDeps([36,1,2,3,15,12,5,6,7,8,13,14,10,4,37,28,38,39,23,24,27,40,41,33,29,42,43,17,11,16,18,19,44,45,46,26,30,47,48,49,50]),import.meta.url)),Ce=s.lazy(()=>m(()=>import("./SettingsColumn-1.0.35-VVh35VI2.js"),__vite__mapDeps([51,1,2,3,15,12,5,6,7,8,13,14,10,4,37,28,38,39,23,24,19,25,26,16,27,29,30,42,43,17,11,18,44,45,46,47,48,49,50]),import.meta.url)),De=s.lazy(()=>m(()=>import("./SettingsRestApi-1.0.35-B5CwFJWZ.js"),__vite__mapDeps([52,1,2,3,15,12,5,6,7,8,13,14,10,4,22,53,37,28,38,39,19,27,24,31,32,33,23,40,41,29,54,25,26,16,55,35,42,43,17,11,18,44,45,46,30,47,48,49,50,56]),import.meta.url)),Me=s.lazy(()=>m(()=>import("./SettingsReset-1.0.35-BXbAPe8C.js"),__vite__mapDeps([57,1,2,3,15,12,5,6,7,8,13,14,10,58,4,59,60,11,16,17,18,37,28,38,39,23,24]),import.meta.url)),ke=s.lazy(()=>m(()=>import("./ResizableDrawer-1.0.35-Db0Upw2F.js"),__vite__mapDeps([61,1,2,3,62,5,6,7,8,4,12,16,14,13,15,10,26]),import.meta.url)),ve=({dbs:t,tbl:n,typ:S})=>{var R,z;l.debug(t,n,S);const c=me(),[q,K]=s.useState(w.getSelectors().selectManagerSettings(N.getState().manager));l.debug(q);const[d,A]=s.useState(""),[T,W]=s.useState(!1),[C,X]=s.useState({}),[D,g]=s.useState(!1),[Y,M]=s.useState(!1);s.useEffect(()=>{T||$()},[t,n]);const $=()=>{je(t,n,!0,r=>{var o,I;const a=r==null?void 0:r.data;if(l.debug("response data",t,n,a),(o=a==null?void 0:a.access)!=null&&o.select&&Array.isArray(a.access.select)&&a.access.select.includes("POST")){const i={...a.settings};i.list_labels={...a.table_labels},i.form_labels={...a.form_labels},i.column_media={...a.wp_media},delete i.hyperlinks,delete i.ui,delete i.wp;const L={...a};X(L),c(ue({settings:i,metaData:L})),W(!0)}else{let i=u.contactSupport;(I=r==null?void 0:r.data)!=null&&I.message&&(i=r.data.message+" - check console for more information"),l.error(i),A(i)}},r=>{l.error("error",r),A(r??u.contactSupport)})};s.useEffect(()=>{d!==""&&(c(pe({error:d})),c(V({})),c(G({})))},[d]);const J=Ee(),Q=((R=U)==null?void 0:R.palette.mode)===de.LIGHT?(z=U)==null?void 0:z.palette.primary.main:"",k=r=>{c(ge({anchor:r}))},x=()=>{c(G({})),c(V({}))},h=()=>{D?M(!0):x()},v=()=>{const r={...J};let a=!1;xe(t,n,r,o=>{if(o!=null&&o.code&&(o==null?void 0:o.message)!==void 0)switch(o.code){case"ok":p(o.message,{variant:"success"});break;case"info":p(o.message,{variant:"info"});break;default:l.error(o),p(o.message??u.contactSupport,{variant:"error"}),a=!0}else l.error(o),p(u.contactSupport,{variant:"error"}),a=!0},o=>{l.error(o),p(o??u.contactSupport,{variant:"error"}),a=!0}),a||K(w.getSelectors().selectManagerSettings(N.getState().manager)),g(!1)},Z=()=>{D?(v(),setTimeout(()=>{x()},1e3)):x()},[y,ee]=s.useState(0),te=s.useMemo(()=>[{title:"Actions",icon:e.jsx(fe,{})},{title:"Settings",icon:e.jsx(Se,{})}],[]);return d!==""?null:e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(ke,{closeDrawer:h,children:[e.jsxs(ne,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ie,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(b,{sx:{flexGrow:1},children:[e.jsx(H,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(H,{sx:{fontSize:"10px",paddingLeft:"10px"},children:[t," - ",n]})]}),e.jsx(j,{title:"Dock to left",position:"bottom",children:e.jsx(E,{onClick:()=>{k(F.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(se,{})})}),e.jsx(j,{title:"Dock to right",position:"bottom",children:e.jsx(E,{onClick:()=>{k(F.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(oe,{})})}),e.jsx(j,{title:"Close",position:"bottom",children:e.jsx(E,{onClick:h,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(le,{})})})]}),e.jsx(he,{menuItems:te,menuIndex:y,setMenu:ee})]}),e.jsx(B,{className:"pp-settings-container",children:e.jsx(O,{sx:{padding:0,margin:0},children:T?e.jsx(ae,{value:y,children:e.jsxs(b,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(P,{value:0,children:e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Ae,{dbs:t,tbl:n,typ:S,metaData:C})})}),e.jsx(P,{value:1,children:e.jsxs(s.Suspense,{fallback:e.jsx(f,{}),children:[e.jsx(Te,{dbs:t,tbl:n,setIsUpdated:g}),e.jsx(Ce,{dbs:t,tbl:n,setIsUpdated:g}),e.jsx(De,{dbs:t,tbl:n,typ:S,metaData:C,setIsUpdated:g}),e.jsx(Me,{dbs:t,tbl:n})]})})]})}):e.jsx(b,{sx:{padding:"30px"},children:e.jsx(f,{title:"Loading data..."})})})}),e.jsx(B,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:Q},children:e.jsxs(O,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(_,{variant:"outlined",className:"footer_action_button_apply",onClick:v,children:"Apply"}),e.jsx(_,{variant:"outlined",className:"footer_action_button",onClick:Z,children:"OK"}),e.jsx(_,{variant:"outlined",className:"footer_action_button",onClick:h,children:"Cancel"})]})})]})}),e.jsx(re,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:Y,setOpen:M,onConfirm:()=>{x()}})]})},ye=()=>{const t=be();return e.jsx(e.Fragment,{children:t!==void 0&&t.action===_e.MANAGE&&e.jsx(ve,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},$e=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{$e as E,Ee as u};
