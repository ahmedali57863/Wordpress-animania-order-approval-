import{j as d}from"./cm-1.0.35--NMEhA6K.js";import{l as w,m as S}from"./lib-1.0.35-vCbYWOI3.js";import{B as F}from"./Spinner-1.0.35-Dd1TcgqP.js";import{F as V}from"./FormLabel-1.0.35-DqGGwQsT.js";import{L as k,a as A}from"./Menu-1.0.35-3APgaaPr.js";import{g as E,l as I,L as G}from"./ListItem-1.0.35-wFs78pI9.js";import{r as B}from"./redux-1.0.35-xa1uZ5t4.js";import{i as P,j as T,c as R,l as U,r as D,m as M,n as O}from"./Typography-1.0.35-DmbWmVEH.js";import{u as W}from"./useEnhancedEffect-1.0.35-gtlBTowv.js";import{a as q,B as z}from"./iconBase-1.0.35-CEh1aNes.js";import{L as K}from"./ListItemIcon-1.0.35-Cltcdraz.js";import{C as H}from"./Checkbox-1.0.35-DB1d6Tfc.js";import{L as J}from"./ListItemText-1.0.35-DZW6eM22.js";import"./vendor-1.0.35-CN03Eozo.js";import"./loglevel-1.0.35-BZ7XahX3.js";import"./lodash-1.0.35-CNe2eGU5.js";import"./moment-1.0.35-C5S46NFB.js";import"./useFormControl-1.0.35-gKEqvAy-.js";import"./AdminTheme-1.0.35-BtyHaBRh.js";import"./cjs-1.0.35-B75n3jry.js";import"./notistack-1.0.35-C7EWtXAA.js";import"./FormHelperText-1.0.35-BubqYRHL.js";import"./MenuItem-1.0.35-DJ1Zxsyh.js";import"./SwitchBase-1.0.35-BN1QoK5P.js";import"./useControlled-1.0.35-Cu7qahuZ.js";import"./createSvgIcon-1.0.35-C47rBL-a.js";const Q=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},X=t=>{const{alignItems:e,classes:n,dense:u,disabled:a,disableGutters:p,divider:v,selected:g}=t,f=U({root:["root",u&&"dense",!p&&"gutters",v&&"divider",a&&"disabled",e==="flex-start"&&"alignItemsFlexStart",g&&"selected"]},E,n);return{...n,...f}},Y=T(z,{shouldForwardProp:t=>D(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Q})(M(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${I.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),Z=B.forwardRef(function(e,n){const u=P({props:e,name:"MuiListItemButton"}),{alignItems:a="center",autoFocus:p=!1,component:v="div",children:g,dense:C=!1,disableGutters:f=!1,divider:$=!1,focusVisibleClassName:b,selected:j=!1,className:h,...x}=u,L=B.useContext(k),o=B.useMemo(()=>({dense:C||L.dense||!1,alignItems:a,disableGutters:f}),[a,L.dense,C,f]),r=B.useRef(null);W(()=>{p&&r.current&&r.current.focus()},[p]);const i={...u,alignItems:a,dense:o.dense,disableGutters:f,divider:$,selected:j},s=X(i),m=q(r,n);return d.jsx(k.Provider,{value:o,children:d.jsx(Y,{ref:m,href:x.href||x.to,component:(x.href||x.to)&&v==="div"?"button":v,focusVisibleClassName:R(s.focusVisible,b),ownerState:i,className:R(s.root,h),...x,classes:s,children:g})})}),Bt=({column:t,columnName:e,columnLabel:n,lov:u,lookups:a,columnFilters:p,setColumnFilters:v,setCurrentFilterColumnName:g,css:C,clientSideProcessing:f,tableColumns:$})=>{w.debug(e,u,p);let b=[];p.map(o=>{o.id===e&&Array.isArray(o.value)&&(b=o.value)}),w.debug(b);const j={...C(),margin:"10px 0 0 0",padding:0,height:"180px",overflow:"auto"},h=o=>d.jsxs(A,{sx:j,children:[...o.map(r=>{const i=f?r.key:r.value,s=r.value;return d.jsx(G,{sx:{margin:0,padding:0},children:d.jsxs(Z,{selected:b.includes(i),sx:{padding:"0 8px 0 0"},onClick:()=>{const m=[...p].filter(y=>y.id===e),l=m.length===0?[]:m[0].value;if(!l.includes(i))l.push(i);else{const y=l.indexOf(i);y!==-1&&l.splice(y,1)}const c=[...p].filter(y=>y.id!==e);l.length>0&&c.push({id:e,value:l}),l.length===0&&g(""),v(c)},onFocus:()=>{g(e)},onBlur:()=>{g("")},children:[d.jsx(K,{sx:{minWidth:0},children:d.jsx(H,{checked:b.includes(i)})}),d.jsx(J,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S(s)})]})})})]}),x=()=>{const o=[],r=$.filter(i=>i.columnName===e)[0];return t.getFacetedUniqueValues().forEach((i,s)=>{var m,l;if(a&&a[e]&&((m=r==null?void 0:r.lookup)==null?void 0:m.loadOnStartup)!==!0){if(a[e][s]&&typeof a[e][s]=="string"){const c=a[e][s]+" ("+i+")";c!==""&&o.push({key:s,value:c})}else if(a[e][s]&&Array.isArray(a[e][s])){const c=a[e][s].join((l=r==null?void 0:r.lookup)==null?void 0:l.delimiter)+" ("+i+")";c!==""&&o.push({key:s,value:c})}}else{const c=s+" ("+i+")";o.push({key:s,value:c})}}),h(o)},L=()=>h(u??[]);return d.jsxs(F,{className:"pp-column-search-field",sx:{margin:0,padding:0},children:[d.jsx(V,{children:n}),f?x():L()]})};export{Bt as default};
