const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.35-C78spqGV.js","./cm-1.0.35--NMEhA6K.js","./redux-1.0.35-xa1uZ5t4.js","./vendor-1.0.35-CN03Eozo.js","./useMetadataColumns-1.0.35-BSxG1_S4.js","./cjs-1.0.35-B75n3jry.js","./Typography-1.0.35-DmbWmVEH.js","./lib-1.0.35-vCbYWOI3.js","./loglevel-1.0.35-BZ7XahX3.js","./lodash-1.0.35-CNe2eGU5.js","./moment-1.0.35-C5S46NFB.js","./iconBase-1.0.35-CEh1aNes.js","./useEnhancedEffect-1.0.35-gtlBTowv.js","./notistack-1.0.35-C7EWtXAA.js","./useTheme-1.0.35-DvysJ9Pk.js","./RestApi-1.0.35-Bt-tzntO.js","./index-1.0.35-CCys4hnd.js","./useStoreTable-1.0.35-BoSxKhPI.js","./useFormStore-1.0.35-TLrcUzfK.js","./Spinner-1.0.35-Dd1TcgqP.js","./AdminTheme-1.0.35-BtyHaBRh.js","./index-1.0.35-Bey3P_99.js","./ActionsDml-1.0.35-BvngWXxi.js","./index-1.0.35-DHBDMhlb.js","./TextField-1.0.35-B1uB0pL3.js","./useFormControl-1.0.35-gKEqvAy-.js","./Menu-1.0.35-3APgaaPr.js","./FormHelperText-1.0.35-BubqYRHL.js","./FormLabel-1.0.35-DqGGwQsT.js","./useControlled-1.0.35-Cu7qahuZ.js","./createSvgIcon-1.0.35-C47rBL-a.js","./MenuItem-1.0.35-DJ1Zxsyh.js","./index-1.0.35-ChYeyr_I.js","./useTableUpdater-1.0.35-Du0YkN1k.js","./Stepper-1.0.35-B-Cu3w2D.js","./StepContent-1.0.35-D2uWS0po.js","./Collapse-1.0.35-EVtTATBO.js","./FormControlLabel-1.0.35-DFi_cuDq.js","./Checkbox-1.0.35-DB1d6Tfc.js","./SwitchBase-1.0.35-BN1QoK5P.js","./ConfirmDialog-1.0.35-5-r3Xts8.js","./DialogContent-1.0.35-B5TpMgZC.js","./ConfirmDialog-1.0.35--D4jr2go.css","./Link-1.0.35-CxbvVS8_.js","./AccordionSummary-1.0.35-Do5lpUEE.js","./AccordionDetails-1.0.35-CUwNn0VM.js","./Switch-1.0.35-Z50HBuFJ.js","./main-1.0.35.js","./useFormUpdater-1.0.35-Cr_Tlk6T.js","./PremiumFeature-1.0.35-BMopEtPl.js","./Slider-1.0.35-W2wgb_UG.js","./visuallyHidden-1.0.35-Dan1xhjv.js","./RadioGroup-1.0.35-en0YSLOf.js","./Radio-1.0.35-Hf47vRci.js","./EnumTypeEnum-1.0.35-Ws4BsaYD.js","./react-number-format.es-1.0.35-C0_LLGCZ.js","./ResizableDrawer-1.0.35-Db0Upw2F.js","./useScreenSize-1.0.35-D9QB3bUJ.js","./SettingsForm-1.0.35-COs_Leor.js","./CssUnitTextField-1.0.35-Bg0goXyi.js","./SettingsFormRelationships-1.0.35-DSu2avTx.js","./ComponentColumn-1.0.35-UdBdi3SL.js","./ActionsExplorer-1.0.35-frLqGKOk.js","./Autocomplete-1.0.35-DKAFaob_.js","./Close-1.0.35-D-owgKS4.js","./Popper-1.0.35-BZjTWtMm.js","./ActionsApp-1.0.35-BVk_SN7N.js","./Tooltip-1.0.35-DvHLxZ2q.js","./ToggleButtonGroup-1.0.35-D2jgODVu.js","./ThemeSettings-1.0.35-C4tTOu8W.js","./index-1.0.35-BRrsEYVz.js","./Stack-1.0.35-CNlFgJdo.js","./SettingsFormCode-1.0.35-DnecCzne.js","./index-1.0.35-DVsXCdtu.js","./index-1.0.35-Bmw9p4nW.js","./index-1.0.35-BtMPEpn4.js","./SettingsTableGlobalCode-1.0.35-CwQbBRGJ.js","./TreeItem2Provider-1.0.35-DbJFXFP5.js","./ThemeContainer-1.0.35-BrWpdfpd.js","./dompurify-1.0.35-DhD2mIk-.js","./FallbackSpinner-1.0.35-CzYFJIrC.js","./ThemeContainer-1.0.35-DR7D6eET.css"])))=>i.map(i=>d[i]);
import{_ as u}from"./main-1.0.35.js";import{j as e}from"./cm-1.0.35--NMEhA6K.js";import{r as o}from"./redux-1.0.35-xa1uZ5t4.js";import{l as i,a2 as X,S as m,N as y,as as Y,P as J,bn as Q,a as L,s as Z,bq as $,br as ee,bs as te,b as h,bt as se}from"./lib-1.0.35-vCbYWOI3.js";import{u as C,a as oe}from"./RestApi-1.0.35-Bt-tzntO.js";import{A as z}from"./AdminTheme-1.0.35-BtyHaBRh.js";import{c as re}from"./ActionsSettings-1.0.35-B25TLnTF.js";import{S as ie}from"./ScopeEnum-1.0.35-B4DDvIDj.js";import{e as c}from"./notistack-1.0.35-C7EWtXAA.js";import{T as b,C as M,a as O,b as ne}from"./ConfirmDialog-1.0.35-5-r3Xts8.js";import{m as ae,j as le,f as me,l as ce}from"./index-1.0.35-BtMPEpn4.js";import{A as ue,T as de,M as pe,B as j}from"./cjs-1.0.35-B75n3jry.js";import{B as fe,a as ge,T as xe,b as _}from"./TabPanel-1.0.35-CQEcgw4y.js";import{u as Se}from"./useFormStore-1.0.35-TLrcUzfK.js";import{T as P}from"./TargetEnum-1.0.35-DPFnTxiX.js";import{B as he,S as f}from"./Spinner-1.0.35-Dd1TcgqP.js";import{B as be}from"./settings-1.0.35-CRkkJAih.js";import{c as je,D as _e}from"./useTheme-1.0.35-DvysJ9Pk.js";import{T as Te}from"./Typography-1.0.35-DmbWmVEH.js";import{I as T}from"./iconBase-1.0.35-CEh1aNes.js";import"./vendor-1.0.35-CN03Eozo.js";import"./loglevel-1.0.35-BZ7XahX3.js";import"./lodash-1.0.35-CNe2eGU5.js";import"./moment-1.0.35-C5S46NFB.js";import"./useEnhancedEffect-1.0.35-gtlBTowv.js";import"./DialogContent-1.0.35-B5TpMgZC.js";import"./Menu-1.0.35-3APgaaPr.js";import"./MenuItem-1.0.35-DJ1Zxsyh.js";import"./index-1.0.35-CCys4hnd.js";const Ce=t=>{const r=C(a=>a.ui.formSettings.isOpen&&a.ui.formSettings.appId===t);return i.debug(t,r),r},Fe=()=>{const t=C(r=>r.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},ke=t=>{const r=C(a=>{var d,p;return(p=(d=a.forms[t])==null?void 0:d.state)==null?void 0:p.isUpdated});return i.debug("isUpdated",r),r},ve=o.lazy(()=>u(()=>import("./SettingsColumns-1.0.35-C78spqGV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]),import.meta.url)),Be=o.lazy(()=>u(()=>import("./ResizableDrawer-1.0.35-Db0Upw2F.js"),__vite__mapDeps([56,1,2,3,57,7,8,9,10,15,6,20,12,11,5,13,26]),import.meta.url)),Ee=o.lazy(()=>u(()=>import("./SettingsForm-1.0.35-COs_Leor.js"),__vite__mapDeps([58,1,2,3,7,8,9,10,15,48,49,23,11,6,12,20,28,25,5,13,44,29,36,45,27,52,53,39,30,37,46,59,24,26,19,43,14,16,60,61,62,63,64,65,66,38,67,31,68,34,35,40,41,42,32]),import.meta.url)),De=o.lazy(()=>u(()=>import("./ThemeSettings-1.0.35-C4tTOu8W.js"),__vite__mapDeps([69,1,2,3,15,7,8,9,10,14,16,6,5,11,12,13,49,23,20,28,25,70,19,27,46,39,29,71,41,50,51,26,37,43,52,53,30,59,24,44,36,45]),import.meta.url));o.lazy(()=>u(()=>import("./SettingsFormCode-1.0.35-DnecCzne.js"),__vite__mapDeps([72,1,2,3,73,74,5,6,7,8,9,10,11,12,13,40,20,41,42,75,76,15,19,67,29,65,77,30,38,39,25,36,49,23,28,78,47,17,22,14,16,57,79,80,81,44,26]),import.meta.url));const at=({appId:t})=>{var R,A;i.debug(t);const r=oe(),a=Fe(),d=je(t),[p]=o.useState(X.getSelectors().selectTableById(m.getState().tables,t));i.debug(p);const[g,N]=o.useState(y.getSelectors().selectForm(m.getState().forms,t));i.debug(g);const U=Se(t),[V,Re]=o.useState(Y.getSelectors().selectThemeById(m.getState().themes,t));i.debug(V);const F=ke(t),x=n=>{r($({appId:t,isUpdated:n}))},[w,k]=o.useState(!1),G=((R=z)==null?void 0:R.palette.mode)===J.LIGHT?(A=z)==null?void 0:A.palette.primary.main:"",v=n=>{r(Z({anchor:n}))},B=()=>{g!==void 0&&r(te({appId:t,formState:g}))},l=()=>{r(ee({})),x(!1)},S=()=>{F?k(!0):(B(),l())},E=()=>{{const n=m.getState().ui.formSettings;re(t,ie.GLOBAL,n.isRelationTable===!0?P.RFORM:P.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":N(y.getSelectors().selectForm(m.getState().forms,t)),c(s.message,{variant:"success"}),U.columns.map((I,W)=>{I.lookup!==void 0&&r(se({appId:t,index:W}))});break;case"info":c(s.message,{variant:"info"});break;default:i.error(s),c(s.message??h.contactSupport,{variant:"error"})}else i.error(s),c(h.contactSupport,{variant:"error"})},s=>{i.error("error",s),c(s??h.contactSupport,{variant:"error"})}),x(!1)}},H=()=>{F?(E(),setTimeout(()=>{l()},1e3)):l()},[D,q]=o.useState(0),K=o.useMemo(()=>{const n=[{title:"Form",icon:e.jsx(ae,{})},{title:"Columns",icon:e.jsx(le,{})},{title:"Hooks",icon:e.jsx(me,{})},{title:"Theme",icon:e.jsx(ce,{})}];return Q(d)?n.splice(0,2):a?n.splice(0,3):n},[a]);return Ce(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Be,{closeDrawer:S,children:[e.jsxs(ue,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(de,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Te,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(b,{title:"Dock to left",position:"bottom",children:e.jsx(T,{onClick:()=>{v(L.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(fe,{})})}),e.jsx(b,{title:"Dock to right",position:"bottom",children:e.jsx(T,{onClick:()=>{v(L.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ge,{})})}),e.jsx(b,{title:"Close",position:"bottom",children:e.jsx(T,{onClick:S,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(pe,{})})})]}),e.jsx(be,{menuItems:K,menuIndex:D,setMenu:q,hide:[2]})]}),e.jsx(M,{className:"pp-settings-container",children:e.jsx(O,{sx:{padding:0,margin:0},children:e.jsx(xe,{value:D,children:e.jsxs(he,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(_,{value:0,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Ee,{appId:t})})}),e.jsx(_,{value:1,className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ve,{appId:t})})}),!1,a!==!0&&e.jsx(_,{value:3,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(De,{appId:t,source:_e.FORM,setIsUpdated:x})})})]})})})}),e.jsx(M,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:G},children:e.jsxs(O,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(j,{variant:"outlined",className:"footer_action_button_apply",onClick:E,children:"Apply"}),e.jsx(j,{variant:"outlined",className:"footer_action_button",onClick:H,children:"OK"}),e.jsx(j,{variant:"outlined",className:"footer_action_button",onClick:S,children:"Cancel"})]})})]})}),e.jsx(ne,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:w,setOpen:k,onConfirm:()=>{B(),l()},onKeep:()=>{l()}})]})};export{at as default};
